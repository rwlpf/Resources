// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}({0:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(s=r.key,i=void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===o(i)?i:String(i)),r)}var s,i}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return c(e,arguments,p(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l(o,e)})(e)}function c(e,t,n){return(c=u()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&l(r,n.prototype),r}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}if(n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return y})),"undefiend"!=typeof window.XMLHttpRequest){var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,e);var t,n,o,a,c,f=(t=d,n=u(),function(){var e,o=p(t);if(n){var r=p(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return i(this,e)});function d(){return s(this,d),f.apply(this,arguments)}return o=d,a&&r(o.prototype,a),c&&r(o,c),Object.defineProperty(o,"prototype",{writable:!1}),o}(a(XMLHttpRequest));Object.defineProperty(f.prototype,"responseURL",Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"responseURL"))}function d(e,t,n,o,r){var s;if((s=window.XMLHttpRequest?new f:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==this.readyState&&n(s)},s.open(e,t,!0),o)for(var i in o)o.hasOwnProperty(i)&&s.setRequestHeader(i,o[i]);s.withCredentials=!0,s.send(r)}function h(e){return void 0!==e&&e&&e.constructor===Array}function m(e){return document.cookie.search(e)>=0}function v(e,t){var n=window["HTML".concat(e,"Element")];if(void 0!==n){var o=Object.getOwnPropertyDescriptor(n.prototype,t);void 0!==o&&Object.defineProperty(n.prototype,"_wm_".concat(t),o)}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"src",n="_wm_".concat(t);return n in e.__proto__?e[n]:e[t]}v("Image","src"),v("Media","src"),v("Embed","src"),v("IFrame","src"),v("Script","src"),v("Link","href"),v("Anchor","href")},11:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"systemStatus",(function(){return m})),n.d(o,"watchJob",(function(){return v})),n.d(o,"init",(function(){return j})),n.d(o,"monitorTwitterArchiver",(function(){return _})),n.d(o,"monitorHighFidelity",(function(){return O}));var r,s=n(2),i=n(0);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return $("<div>",{id:t}).append($("<a>",{href:e}).html(e),$("<span>").html(" Saving... ").append('<img src="'.concat(p,'images/loading.gif" />')))}function u(e){var t=$("body").find("#".concat(e.job_id)).first();if("success"===e.status){var n="/web/".concat(e.timestamp,"/").concat(e.original_url);t.children("a").first().attr("href",n).html(n),t.children("span").html('<span class="label label-success" style="display:inline-block;margin-left:2px"><span class="iconochive-Done"></span> Done!</span>'),!0===e.first_archive&&t.children("span").first().append('<span class="label label-default" style="display:inline-block;margin-left:2px"><span class="iconochive-First"></span> First Archive</span>')}else"error"===e.status&&t.children("span").html("").append('<span class="label label-danger" style="display:inline-block;margin-left:2px">Error! '+e.message+"</span>")}var l,p,f,d=[];function h(e){$.post("/save/status?_t="+Date.now(),{job_id_outlinks:e},(function(t){var n,o=!1;for(var r in t){var s=t[r];u(s),"pending"===s.status?o=!0:"success"===s.status&&-1===d.indexOf(s.job_id)?(d.push(s.job_id),n=s.job_id,$.ajax({url:"/save/status/".concat(n,"?_t=").concat(Date.now()),success:function(e){if(e.outlinks&&"object"===a(e.outlinks)&&"0"!==Object.keys(e.outlinks)[0]&&Object.keys(e.outlinks).length){for(var t in e.outlinks){var n=e.outlinks[t];0===$("body").find("#"+n).length&&$("#spn-outlinks").append(c(t,n))}setTimeout((function(){h(e.job_id)}),6e3)}}})):"error"===s.status&&-1===d.indexOf(s.job_id)&&d.push(s.job_id)}!1!==o&&setTimeout((function(){h(e)}),6e3)}))}function m(){$.get("/save/status/system",(function(e){"ok"!==e.status&&$("#web_save_div").prepend('<div class="alert alert-warning">'.concat(e.status,"</div>"))}))}function v(e,t,n){l=e,p=t,f=n,r=$("#saving-msg"),Object(i.c)("logged-in-user")||$("#spn-option-mywebarchive").hide(),$("#report-issue").on("click",(function(){$.ajax({url:"/save/_report-issue/".concat(l),beforeSend:function(e){$("#report-issue-container").html('Sending info... <img src="'.concat(p,'images/loading.gif"/>'))},complete:function(e){$("#report-issue-container").html("Thank you!")}})})),g()}function y(e){var t="/web/".concat(e.timestamp,"/").concat(e.original_url);if("available"in e&&"message"in e)$("#spn-result").append($("<span>").text(e.message+" Visit page: "),$("<a>",{href:t}).html(t)),$("#spn-resources").hide(),$("#spn-option-mywebarchive").hide();else{if($("#spn-title").append($("<span>").html(" "),$("<span>",{class:"label label-success",style:"font-size: small"}).append($("<span>",{class:"iconochive-Done"}),$("<span>").html(" Done!"))),"first_archive"in e&&$("#spn-title").append($("<span>").html(" "),$("<span>",{class:"label label-default",style:"font-size: small"}).append($("<span>",{class:"iconochive-First"}),$("<span>").html(" First Archive "))),$("#spn-result").append($("<span>").html(" A snapshot was captured. Visit page: ").append($("<a>",{href:t}).html(t))),"screenshot"in e){var n="/web/".concat(e.timestamp,"/").concat(e.screenshot);$("#spn-result").append($("<div>").html("A screen shot was captured. View screen shot: ").append($("<a>",{href:n}).html(n)))}if("www.youtube.com"===new URL(e.original_url).hostname&&$("#spn-result").append("<div>It may take a few days for YouTube videos to become available for playback.</div>"),"message"in e&&$("#spn-result").append($("<div>").html(e.message)),"undefined"!==e.resources&&0!==e.resources.length||$("#spn-resources").hide(),e.outlinks&&"object"===a(e.outlinks)&&"0"!==Object.keys(e.outlinks)[0]&&Object.keys(e.outlinks).length){for(var o in $("#spn-outlinks").append("<strong>Saving outlinks and their embedded resources</strong><br />"),e.outlinks)$("#spn-outlinks").append(c(o,e.outlinks[o]));h(l)}$("<div>",{class:"text-center"}).append($("<a>",{href:"/save"}).html("Return to Save Page Now")).insertAfter("#spn-outlinks"),Object(i.c)("logged-in-user")&&Object(i.c)("logged-in-sig")&&$("#wm-save-mywebarchive")[0].checked?(Object(s.b)(e.original_url,e.timestamp),$("#wm-save-snapshot-success").show(),$("#spn-option-mywebarchive").delay(2e3).hide(0)):$("#spn-option-mywebarchive").hide(0)}r.html("")}var b=0;function w(e){if(5===(b+=1))return y(e),void function(e){$("#spn-result").append("<div>There was a delay in registering this snapshot with the Wayback Machine.</div>"),"first_archive"in e?$("#spn-result").append("<div>The snapshot may not be available right now, please try again later.</div>"):$("#spn-result").append("<div>You may be redirected to a previous version right now. This snapshot will be available later.</div>")}(e);$.ajax({url:"/web/timemap/",data:{url:e.original_url,from:e.timestamp,limit:1,_t:Date.now()},success:function(t){""!==t&&void 0!==t?y(e):setTimeout((function(){w(e)}),f)},error:function(){setTimeout((function(){w(e)}),f)}})}function g(){$.ajax({url:"/save/status/".concat(l,"?_t=").concat(Date.now()),beforeSend:function(e){""===r.html()&&r.append("Saving... ",'<img src="'.concat(p,'images/loading.gif"/>'))},success:function(e){if(e.resources){var t=e.resources.length;t>0&&($("#spn-elements-counter-container").show(),$("#spn-elements-counter").html(t));var n=e.resources.join("\n");""!=n&&$("#spn-resources").val(n)}if(e.download_size){var o=Math.round(e.download_size/e.total_size*100),s=function(e){var t=-1;do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+[" kB"," MB"," GB"][t]}(e.download_size);o>0&&(s+=" ("+o.toString()+"%)"),$("#spn-progress").show(),$("#spn-progress > div.progress-bar").attr("style","width: "+o.toString()+"%").attr("aria-valuenow",o).text(s)}var i;"success"===e.status?setTimeout((function(){w(e)}),f):"error"===e.status?(void 0===(i=e.message)&&(i="Internal server error."),r.html(""),$("#spn-result").append($("<p>",{class:"text-danger"}).html(i),$("<a>",{href:"/save"}).html("Return to Save Page Now")),$("#spn-resources").hide()):setTimeout(g,f)},error:function(){setTimeout(g,f)}})}function j(){$("#web-save-form").on("submit",(function(e){e.preventDefault();var t=$("#web-save-url-input").val(),n=$("#web-save-form")[0];$(n).attr("action","/save/"+t),n.submit()})),$(document).ready((function(){document.cookie.search("logged-in-user")>=0&&document.cookie.search("logged-in-sig")>=0&&($("#wm-save-option, #wm-capture-screenshot, #wm-capture-outlinks, #wm-email-result, #wm-wacz").show(),$("#wm-auth-features").hide())}))}var k=/^(https?:\/\/)?twitter.com\//;function _(){$("#web-save-url-input").on("input",(function(){!function(e){try{if(e&&k.test(e)>-1){/^((http|https):\/\/)/.test(e)||(e="https://"+e);var t=new URL(e),n=t.pathname.substr(1);if("twitter.com"===t.host&&n.length>=3&&-1===n.indexOf("/"))return!0}}catch(e){console.log(e)}return!1}($(this).val())?$("#wm-twitter-archiver").hide():$("#wm-twitter-archiver").show()}))}function O(){$("#high_fidelity").on("click",(function(){var e="#wm-capture-screenshot, #wm-save-option, #wm-email-result, #wm-wacz, #wm-error-pages, #wm-skip-recent, #wm-skip-daily, #wm-capture-outlinks, #wm-proxy";$(this)[0].checked?$(e).hide():$(e).show()}))}window.spn=o},2:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var o=n(0);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(s=o.key,i=void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===r(i)?i:String(i)),o)}var s,i}var i=JSON;function a(e,t,n,r){return r=r||{},Object(o.a)("POST","/__wb/web-archive/",(function(e){401===e.status?r.userNotLoggedIn&&r.userNotLoggedIn(e):e.status>=400?r.failure&&r.failure(e):r.success&&r.success(e)}),{"Content-Type":"application/json"},i.stringify({url:e,snapshot:t,tags:n||[]})),!1}var c=function(){function e(t,n,r){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.url=n,this.timestamp=r,t.onclick=this.save.bind(this),document.addEventListener("DOMContentLoaded",(function(){s.enableSaveSnapshot(Object(o.c)("logged-in-user"))}))}var t,n,r;return t=e,(n=[{key:"save",value:function(e){this.start(),a(this.url,this.timestamp,[],{failure:this.failure.bind(this),success:this.success.bind(this)})}},{key:"start",value:function(){this.hide(["wm-save-snapshot-fail","wm-save-snapshot-open","wm-save-snapshot-success"]),this.show(["wm-save-snapshot-in-progress"])}},{key:"failure",value:function(e){401==e.status?this.userNotLoggedIn(e):(this.hide(["wm-save-snapshot-in-progress","wm-save-snapshot-success"]),this.show(["wm-save-snapshot-fail","wm-save-snapshot-open"]),console.log("You have got an error."),console.log("If you think something wrong here please send it to support."),console.log('Response: "'+e.responseText+'"'),console.log('status: "'+e.status+'"'))}},{key:"success",value:function(e){this.hide(["wm-save-snapshot-fail","wm-save-snapshot-in-progress"]),this.show(["wm-save-snapshot-open","wm-save-snapshot-success"])}},{key:"enableSaveSnapshot",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.show("wm-save-snapshot-open"),this.hide("wm-sign-in")):(this.hide(["wm-save-snapshot-open","wm-save-snapshot-in-progress"]),this.show("wm-sign-in"))}},{key:"show",value:function(e){this.setDisplayStyle(e,"inline-block")}},{key:"hide",value:function(e){this.setDisplayStyle(e,"none")}},{key:"setDisplayStyle",value:function(e,t){var n=this;(Object(o.d)(e)?e:[e]).forEach((function(e){var o=n.el.getRootNode().getElementById(e);o&&(o.style.display=t)}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}});
// @license-end
